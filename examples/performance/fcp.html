<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    const pageUrl = window.location.href
    const lazyReport = console.log

    const entryHandler = function (entryList) {
      for (const entry of entryList.getEntries()) {
        // 监听 fcp
        if (entry.name === 'first-contentful-paint') {
          lazyReport({
            type: 'performance',
            subType: 'first-contentful-paint',
            pageUrl,
            time: entry.startTime,
          })
        }
        // 监听 fp
        if (entry.name === 'first-paint') {
          lazyReport({
            type: 'performance',
            subType: 'first-paint',
            pageUrl,
            time: entry.startTime,
          })
        }
      }
    }

    const observer = new PerformanceObserver(entryHandler)
    observer.observe({ type: 'paint', buffered: true })
  </script>
</head>

<body>
  <img src="https://img-blog.csdnimg.cn/img_convert/1961d1a323bcca39fbd0189083bcaff4.png" alt="">

</body>

</html>